<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Product | Admin Area</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/adminstyle.css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>

  <body>

    <nav class="navbar navbar-inverse">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" target="_blank">Awesome Shop</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="/admin/pages">Pages</a></li>
            <li><a href="/admin/categories">Categories</a></li>
            <li><a href="/admin/products">Products</a></li>
          </ul>
           <ul class="nav navbar-nav navbar-right">
               <li><a href="/users/logout">
                <i style="font-size:24px" class="fa">&#xf08b;</i>
                Logout
              </a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">
      <%- messages('messages', locals) %>
      
      <% if (errors) {%>
        <% errors.forEach(function(error) { %>
        <div class="alert alert-danger">
            <%= error.msg %>
        </div>
        <% });%>
      <% }%>
      <h2 class="page-title">Products</h2>
      <a href="/admin/products/add-product" class="btn btn-primary" style="box-shadow: 0 0 10px rgba(0,0,0,0.5);">Add a new product</a>
      <br><br>

      <% if (count > 0) { %>  
      <table class="table table-striped alignmiddle">
        <thead style="  box-shadow: 0 0 10px rgba(0,0,0,0.5);">
          <tr class="home" style="background-color: #0275d8; color: white; width: 100%;">
            <th>Name
              <span>&nbsp;<i style="font-size:24px" class="fa">&#xf0d8;</i></span>
            </th>
            <th>Price</th>
            <th>Quantity</th>
            <th>Detail</th>
            <th>Category</th>
            <th>
              In Stock At <span>&nbsp;
                <i style="font-size:24px" class="fa">&#xf0d7;</i>
              </span>
            </th>
            <th>Product Image</th>
            <th style="text-align: center;">Action</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <% products.forEach(function(product){ %>
          <tr>
            <td><%= product.title %></td>
            <td>$<%= parseFloat(product.price).toFixed(2) %></td>
            <td><%= parseInt(product.quantity).toFixed(3) %> </td>
            <td><%= product.desc %> </td>
            <td><%= product.category %></td>
            <td><%= product.instockAt%> </td>
            <td>
                <% if (product.image == "") { %>
                <img id="noimage" src="/images/noimage.png">
                <% } else {%>
                <img id="noimage" src="/product_images/<%= product._id %>/<%= product.image %>">
                <% }%>
            </td>
            <td><a href="/admin/products/edit-product/<%= product._id %>">
              <i style="font-size:24px" class="fa">&#xf044;</i>
              
            </a></td>
            <td><a class="confirmDeletion" href="/admin/products/delete-product/<%= product._id %>">
              <i style="font-size:24px" class="fa">&#xf014;</i>
             
            </a></td>
        </tr>
        <% }); %>
      </tbody>
    </table>
    <% } else {%> 
    <h3 class="text-center">There are no products.</h3>
    <% }%>

    </div><!-- /.container -->
    <br><br><br>
    <hr>
    <p class="text-center">&COPY; Awesome Shop</p>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="//cdn.ckeditor.com/4.7.1/standard/ckeditor.js"></script>
    <script src="/js/main.js"></script>
  </body>
</html>
